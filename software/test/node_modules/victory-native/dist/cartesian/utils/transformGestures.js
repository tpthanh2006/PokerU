"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.panTransformGesture = exports.pinchTransformGesture = void 0;
const react_native_gesture_handler_1 = require("react-native-gesture-handler");
const react_native_skia_1 = require("@shopify/react-native-skia");
const pinchTransformGesture = (state) => {
    const pinch = react_native_gesture_handler_1.Gesture.Pinch()
        .onBegin((e) => {
        state.offset.value = state.matrix.value;
        state.origin.value = {
            x: e.focalX,
            y: e.focalY,
        };
    })
        .onStart(() => {
        state.zoomActive.value = true;
    })
        .onChange((e) => {
        state.matrix.value = (0, react_native_skia_1.multiply4)(state.offset.value, (0, react_native_skia_1.scale)(e.scale, e.scale, 1, state.origin.value));
    })
        .onEnd(() => {
        state.zoomActive.value = false;
    });
    return pinch;
};
exports.pinchTransformGesture = pinchTransformGesture;
const panTransformGesture = (state, config = {}) => {
    const pan = react_native_gesture_handler_1.Gesture.Pan()
        .onStart(() => {
        state.panActive.value = true;
    })
        .onChange((e) => {
        state.matrix.value = (0, react_native_skia_1.multiply4)((0, react_native_skia_1.translate)(e.changeX, e.changeY, 0), state.matrix.value);
    })
        .onEnd(() => {
        state.panActive.value = false;
    });
    if (config.activateAfterLongPress !== undefined) {
        pan.activateAfterLongPress(config.activateAfterLongPress);
    }
    return pan;
};
exports.panTransformGesture = panTransformGesture;
